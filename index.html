<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Study Screen Recording</title>
  <style>
    body { font-family: Arial, sans-serif; max-width: 600px; margin: auto; padding: 20px; }
    h1 { text-align: center; }
    ol { margin-top: 1em; }
    button { font-size: 1.1em; margin: 10px 5px; padding: 10px 20px; }
    a { color: blue; text-decoration: underline; }
  </style>
</head>
<body>
  <h1>Study Instructions</h1>
  <ol>
    <li><strong>Read all instructions carefully.</strong> Understand the task before you begin.</li>
    <li>Open the <a href="https://playspent.org/" target="_blank" rel="noopener noreferrer" id="gameLink">Spent Game</a> in a new tab.</li>
    <li>Click <strong>Start Recording</strong> below and select the <em>Spent</em> game tab or your full screen to share.</li>
    <li>Play the game according to the instructions on the game page.</li>
    <li>When done, either click <strong>Stop Recording</strong> button here, or manually stop screen sharing from your browser toolbar. The recording will then download automatically and you will be redirected to the post-survey page.</li>
  </ol>

  <div style="text-align:center; margin-top: 20px;">
    <button id="startBtn">Start Recording</button>
    <button id="stopBtn" disabled>Stop Recording</button>
  </div>

  <script>
    const redirectURL = 'https://www.butler.edu/'; // CHANGE this to your actual post-survey URL

    let mediaRecorder;
    let recordedChunks = [];

    // Start recording handler
    document.getElementById('startBtn').onclick = async () => {
      try {
        const stream = await navigator.mediaDevices.getDisplayMedia({ video: true, audio: false });

        // Listen for user manually stopping the screen share
        stream.getVideoTracks()
